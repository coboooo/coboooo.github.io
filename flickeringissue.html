<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>aaa</title>

    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

    <!-- Bootstrap core CSS -->
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBKX2qVDlRCvG2wEPGnHSI_do-1b1MNDgA",
            authDomain: "jeju-30f0f.firebaseapp.com",
            projectId: "jeju-30f0f",
            storageBucket: "jeju-30f0f.appspot.com",
            messagingSenderId: "858711752608",
            appId: "1:858711752608:web:060df778af6cb153092ec5",
            measurementId: "G-VB12HRY0D2"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>

    <style>
        .line-bucket {
            background-color: rgb(236, 236, 236);
            margin: 10px;
            transition: background-color 0.1s ease;
        }

        .line-bucket:hover {
            background-color: rgb(255, 161, 161);
            margin: 10px;
        }
    </style>

</head>

<body>
    <header>
        <div class="navbar navbar-dark bg-primary box-shadow">
            <div class="container">
                <strong class="text-white h3">aaa</strong>
                <div class="text-white ms-auto">signup</div>
            </div>
        </div>
    </header>

    <main role="main">
        <section class="jumbotron">
            <div class="container">
                <p class="lead">
                <div class="bucket mt-3">
                    <div class="mb-3">
                        <input type="email" class="form-control" placeholder="email" id="email">
                    </div>
                    <div class="mb-3">
                        <input type="password" class="form-control" placeholder="pw" id="pw">
                    </div>
                    <button type="submit" class="btn btn-primary" id="login">로그인</button>
                </div>
                <span class="ms-auto mx-2" id="emailshow"></span><br>
                <button id="logout" style="display:none;">로그아웃</button>
                <button id="allDelete" class="allDelete">DELETE</button>
                <button onclick="location.reload();">Refresh</button>
                <div class="starting"></div>
                <div class="test"></div>

                <!-- <input type="text" id="search-input" placeholder="" autofocus>
                <div id="search-results"></div> -->

                <div id="RankingDiv" class="RankingDiv"></div>

                </p>
            </div>
        </section>
    </main>

    <footer class="text-muted">
        <div class="container">
            <p>... &copy; ...</p>
        </div>
    </footer>
</body>

</html>
<script>
    const collectionRef = db.collection("product");

    $('#login').click(function () {
        var 이메일 = $('#email').val();
        var 패스워드 = $('#pw').val();
        firebase.auth().signInWithEmailAndPassword(이메일, 패스워드).then((result) => {
            // console.log(result.user)
            $('.bucket').hide();
            $('#logout').show();
            location.reload();
        })
    })

    var userStr = localStorage.getItem('user');
    if (userStr) {
        var userObj = JSON.parse(userStr);
        $('#emailshow').html(userObj.email);
        console.log('userObj.email->' + userObj.email);
    }

    firebase.auth().onAuthStateChanged((user) => {
        if (user) {
            console.log('user.email->' + user.email);
            localStorage.setItem('user', JSON.stringify(user));
            // user is logged in, hide the input window
            $('.bucket').hide();
            $('#logout').show();
            $('#emailshow').html(user.email);
        } else {
            // user is not logged in, show the input window
            $('.bucket').show();
            $('#logout').hide();
            $('#emailshow').html('');
        }
    });

 

</script>

