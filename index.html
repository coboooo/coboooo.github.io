<!DOCTYPE html>
<html>

<head>
  <meta title="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script> -->
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyA-n4dwue7PArKFzBDS8tr4XEBUeRF2GEs",
      authDomain: "fir-c3fbf.firebaseapp.com",
      projectId: "fir-c3fbf",
      storageBucket: "fir-c3fbf.appspot.com",
      messagingSenderId: "121918325916",
      appId: "1:121918325916:web:233b0349f524df25779959",
      measurementId: "G-BPHH2CFZYF"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <style>
    * {
      font-size: 30px;
    }

    .container {
      width: 100%;
      height: 100vh;
      background: #ffffff;
    }

    .item {
      width: 300px;
    }

    .item1 {
      background: #ffffff;
      border: 5px solid #ff0000;
    }

    .item2 {
      background: #fff7f7;
    }

    .messages {
      background: #ffb2b2;
      display: flex;
      margin: 5px;
    }

    .messageLeft {
      background: #ffe9ac;
      margin: 5px;
      border: 5px solid #292929;
      width: 40%;
    }

    .messageRight {
      background: #d4ffac;
      margin: 5px;
      border: 5px solid #292929;
      width: 30%;
    }
  </style>

<body>
  <div class="container">
    <div class="item item1">
      <form>
        <input type="text" id="message-input" placeholder="" autofocus>
      </form>
    </div>
    <div class="item item2">
    </div>
  </div>

  <script>
    $(document).ready(function () {
      var $messageInput = $("#message-input");
      var $container = $(".item.item2");

      // Reference to the chat messages in Firebase
      var chatRef = firebase.database().ref("messages");

      var numbers = [];
      for (var i = 1; i <= 100; i++) {
        numbers.push(i);
      }
      var stringArray = numbers.map(function (num) {
        return num.toString();
      });

      console.log(stringArray);

//       var data = `
// data1
// data2
// data3
// `;
//       var dataArray = data.split('\n');
//       dataArray = dataArray.slice(1, -1);

      for (var i = 0; i < stringArray.length; i++) {
        var message = stringArray[i];
        var email = 'email';
        chatRef.push({
          text: message,
          email: email
        });
      }

      // Listen for key press on input field
      $messageInput.keypress(function (e) {
        // Check if Enter key is pressed
        if (e.keyCode == 13) {
          // Get message text
          var message = $(this).val();
          var email = 'emailemailemail';
          // Save message to Firebase
          chatRef.push({
            text: message,
            email: email
          });
          // Clear input field
          $(this).val("");
        }
      });

      // Listen for new messages added to Firebase
      chatRef.on("child_added", function (snapshot) {
        // Get message data
        var message = snapshot.val().text;
        var email = snapshot.val().email;
        // Escape message and email inputs
        var escapedMessage = $("<div>").text(message).html();
        var escapedEmail = $("<div>").text(email).html();
        // Add message to chat UI
        $container.append("<div class='messages'><div class='messageLeft'>" + escapedMessage + "</div>" +
          "<div class='messageRight'>" + escapedEmail + "</div></div>");
        // Scroll container to bottom
        $container.scrollTop($container[0].scrollHeight);
      });
    });


  </script>
</body>