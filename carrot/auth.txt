match /chatroom/{docid} {
	allow read, write : if true:
}

match /user/{docid} {
	allow read, write : if true:
}

match /product/{docid} {
	allow read: if true;
	allow create: if request.auth != null;
	allow create: if request.auth.uid == resource.data.uid;
}

match /product/{docid} {
  allow read : if true;
  allow create : if request.auth != null;
  allow update : if request.auth.uid == resource.data.uid 
  || get(/databases/$(database)/documents/user/$(request.auth.uid)).data.role == 'admin';
}

match /product/{docid} {
  allow read : if true;
  allow create : if request.auth != null
  && request.resource.data.keys().hasOnly(['제목', '내용', '가격'])
  && request.resource.data.제목.size() > 0
  && request.resource.data.제목 is string

  allow update : if request.auth.uid == resource.data.uid 
  || get(/databases/$(database)/documents/user/$(request.auth.uid)).data.role == 'admin';
}